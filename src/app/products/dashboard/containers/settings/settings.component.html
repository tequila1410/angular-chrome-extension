<div class="settings" [@fadeIn]="'in'">
  <div class="settings-header">
    <div class="settings-navigation">
      <span class="material-icons arrow-back" (click)="goToDashboard()">arrow_back</span>
      <h3>Settings</h3>
    </div>
  </div>

  <div class="settings-content">
    <ul class="settings-content-left">
      <li>Exclusions</li>
    </ul>

    <div class="settings-content-main">
      <div class="exclusions">
        <h2 class="exclusions-title">Exclusions</h2>
        <form class="exclusions-modes" [formGroup]="modeForm" (change)="modeChange($event)">
          <h3>Operating Mode</h3>
          <div class="exclusions-modes-item">
            <input type="radio" id="regularMode" value="regularMode" formControlName="mode">
            <label for="regularMode">Regular mode</label>
            <p>ZoogVPN won't work on websites from the list below</p>

            <div class="exclusions-controls">
              <div class="exclusions-controls-btns">
                <button (click)="inputVisibility('regular')" class="exclusions-controls-add">+ ADD A WEBSITE</button>
                <button (click)="clearChosenList('regular')" class="exclusions-controls-delete">DELETE ALL</button>
              </div>

              <div *ngIf="regularInput" class="exclusions-controls-input">
                <form [formGroup]="webSiteForm">
                  <input id="webSite" formControlName="webSite" type="url"
                    (blur)="inputVisibility('regular')"
                    (change)="addWebsite($event, 'regular')"
                    (click)="addWebsite($event, 'regular')">
                  <label for="webSite" *ngIf="webSiteForm.controls['webSite'].errors?.pattern">Please provide valid url</label>
                </form>
              </div>
              <ul class="exclusions-controls-list" [ngClass]="{table: regularExclusions.length > 0}">
                <li *ngFor="let website of regularExclusions; trackBy: trackByWebsiteLink; let itemIndex = index" class="exclusions-controls-list-item">
                  <span>
                    <span>
                      <input type="checkbox" [id]="'regCheckbox' + itemIndex" [checked]="website.enabled" (change)="enableChange($event, website, 'regular')">
                      <label [for]="'regCheckbox' + itemIndex">{{website.link}}</label>
                    </span>
    
                    <button (click)="deleteWebsite(website.link, itemIndex, 'regular')" class="exclusions-controls-list-btn">
                      <span class="material-icons close">close</span>
                    </button>
                  </span>
                </li>
              </ul>
            </div>
          </div>
          <div class="exclusions-modes-item">
            <input type="radio" id="selectiveMode" value="selectiveMode" formControlName="mode">
            <label for="selectiveMode">Selective mode</label>
            <p>ZoogVPN will only work on websites from the list below</p>

            <div class="exclusions-controls">
              <div class="exclusions-controls-btns">
                <button (click)="inputVisibility('selective')" class="exclusions-controls-add" [ngClass]="{backlight: needAddSelective}">+ ADD A WEBSITE</button>
                <button (click)="clearChosenList('selective')" class="exclusions-controls-delete">DELETE ALL</button>
              </div>

              <div *ngIf="selectiveInput" class="exclusions-controls-input">
                <form [formGroup]="webSiteForm">
                  <input id="webSite" formControlName="webSite" type="url"
                    (blur)="inputVisibility('selective')"
                    (change)="addWebsite($event, 'selective')"
                    (click)="addWebsite($event, 'selective')">
                  <label for="webSite" *ngIf="webSiteForm.controls['webSite'].errors?.pattern">Please provide valid url</label>
                </form>
              </div>
              <ul class="exclusions-controls-list" [ngClass]="{table: selectiveExclusions.length > 0}">
                <li *ngFor="let website of selectiveExclusions; trackBy: trackByWebsiteLink; let itemIndex = index" class="exclusions-controls-list-item">
                  <span>
                    <span>
                      <input type="checkbox" [id]="'selCheckbox' + itemIndex" [checked]="website.enabled" (change)="enableChange($event, website, 'selective')">
                      <label [for]="'selCheckbox' + itemIndex">{{website.link}}</label>
                    </span>
    
                    <button (click)="deleteWebsite(website.link, itemIndex, 'selective')" class="exclusions-controls-list-btn">
                      <span class="material-icons close">close</span>
                    </button>
                  </span>
                </li>
              </ul>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
